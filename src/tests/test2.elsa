import "std/io";
import "std/assert";

struct MyStruct
{
	int x;

	fn Get() : int
	{
		return x;
	}
	
	fn Inc()
	{
		x++;
	}
};

fn IncX2(fn inc)
{
	inc();
	inc();
}

fn main()
{
	var str = new MyStruct { x: 20 };
	var ret_str = fn : int => { return str.x; };
	var inc_str = fn => { str.x = str.x + 10; };
	
	AssertEq(20, ret_str());
	str.x = 30;
	AssertEq(30, ret_str());
	inc_str();
	AssertEq(40, ret_str());
	IncX2(inc_str);
	AssertEq(60, ret_str());

	var x = 10;
	x = 11;
	var ret = fn : int => { return x; };
	var inc = fn => { x = x + 1; };
	
	AssertEq(11, ret());
	inc();
	AssertEq(12, ret());
	inc();
	AssertEq(13, ret());
	
	IncX2(inc);
	
	AssertEq(15, ret());

	PrintLn(":)");
}